<div class="mt-3">
  <app-header-table [renderButton]="false" [titleHeader]="'Modulo Interfaz'" [titleSelect]="'Buscar Turno..'"
                    (searchOutput)="onSearchChange($event)" [listNav]="listNav">
  </app-header-table>
</div>
<div class="moduloI card mb-4 mx-5">
  <div class="table-responsive-lg px-4">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col" style="border-bottom: none;width: 10%">Dia del turno</th>
            <th scope="col" style="border-bottom: none;">Dia de inicio</th>
            <th scope="col" style="border-bottom: none;">Hora de inicio</th>
            <th scope="col" style="border-bottom: none;">Dia de terminación</th>
            <th scope="col" style="border-bottom: none;">Hora de terminación</th>
            <th scope="col" style="border-bottom: none;">Tipo de segmento</th>
            <th scope="col" style="border-bottom: none; width: 10%">Tiempo efectivo</th>
            <th scope="col"></th>
          </tr>
          <tr>
            <th>
              <select class="form-control" id="diaturno" nombre="diaturno" formControlName="diaturno"
                      [ngClass]="{ 'is-invalid': submitted && f.diaturno.errors }">
                <option value="">Seleccionar dia</option>
                <option *ngFor="let dts of DiaTurno" [value]="dts.id">
                  {{dts.id}}
                </option>
              </select>
              <div *ngIf="submitted && f.diasem.errors" class="invalid-feedback">
                <div *ngIf="f.diasem.errors.required">Dia del turno es requerido</div>
              </div>
            </th>
            <th>
              <select class="form-control" id="diasem" nombre="diasem" formControlName="diasem"
                      (onChange)="DiaChange()" [(ngModel)]="DiaSemana.dia" [ngClass]="{ 'is-invalid': submitted && f.diasem.errors }">
                <option *ngFor="let ds of DiaSemana" [value]="ds.id">
                  {{ds.dia}}
                </option>
              </select>
              <div *ngIf="submitted && f.diasem.errors" class="invalid-feedback">
                <div *ngIf="f.diasem.errors.required">Dia de inicio es requerido</div>
              </div>
            </th>
            <th>
              <div class=" ">
                <input type="time" id="hrenttur" class="form-control" 
                       formControlName="hrenttur" [ngClass]="{ 'is-invalid': submitted && f.hrenttur.errors }">
                <div *ngIf="submitted && f.hrenttur.errors" class="invalid-feedback">
                  <div *ngIf="f.hrenttur.errors.required">Fecha de inicio es requerida</div>
                </div>
              </div>
            </th>
            <th>
              <select class="form-control" id="diasemter" nombre="diasemter" formControlName="diasemter"
                      (onChange)="DiaChange2()" [(ngModel)]="DiaSemana2.dia" [ngClass]="{ 'is-invalid': submitted && f.diasemter.errors }">
                <option *ngFor="let ds2 of DiaSemana2" [value]="ds2.id">
                  {{ds2.dia}}
                </option>
              </select>
              <div *ngIf="submitted && f.diasemter.errors" class="invalid-feedback">
                <div *ngIf="f.diasemter.errors.required">Dia de terminacion es requerido</div>
              </div>
            </th>
            <th>
              <div class=" ">
                <input type="time" id="hrentturter" class="form-control" 
                       formControlName="hrentturter" [ngClass]="{ 'is-invalid': submitted && f.hrentturter.errors }">
                <div *ngIf="submitted && f.hrentturter.errors" class="invalid-feedback">
                  <div *ngIf="f.hrentturter.errors.required">Fecha de terminación es requerida</div>
                </div>
              </div>
            </th>
            <th>
              <select class="form-control" id="tiposeg" nombre="tiposeg" formControlName="tiposeg"
                      (onChange)="SegmentoChange()" [(ngModel)]="TipoSegmento.segmento" [ngClass]="{ 'is-invalid': submitted && f.tiposeg.errors }">
                <option *ngFor="let ts of TipoSegmento" [value]="ts.id">
                  {{ts.segmento}}
                </option>
              </select>
              <div *ngIf="submitted && f.tiposeg.errors" class="invalid-feedback">
                <div *ngIf="f.tiposeg.errors.required">Tipo de Segmento es requerido</div>
              </div>
            </th>
            <th>
              <div style="text-align:center">
                <mat-slide-toggle id="tiempoefec" nombre="tiempoefec" (change)="ToggleEfec($event)" value="false"
                                  formControlName="tiempoefec" [ngClass]="{ 'is-invalid': submitted && f.tiempoefec.errors }">
                </mat-slide-toggle>
                <div *ngIf="submitted && f.tiempoefec.errors" class="invalid-feedback">
                  <div *ngIf="f.tiempoefec.errors.required">Tiempo efectivo requerido</div>
                </div>
              </div>
            </th>
            <th>
              <div class="">
                <button type="submit" class="btn btn-primary" click="onSubmit()">Guardar</button>
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let dt of listaDiaturnos; index as i">
            <td>{{dt.diaturno}}</td>
            <td>{{dt.nombre_dia}}</td>
            <td>{{dt.hrenttur}}</td>
            <td>{{dt.nombre_dia2}}</td>
            <td>{{dt.hrentturter}}</td>
            <td>{{dt.nombre_seg}}</td>
            <td>
              <a class="btn" data-toggle="tooltip" data-placement="top" (click)="update(dt)">
                <i class="material-icons">create</i>
              </a>{{dt.efec}}
            </td>
            <td>
              <a class="btn" data-toggle="tooltip" data-placement="top" title="Eliminar "
                 (click)="delete(dt)"><i class="material-icons">delete</i></a>
            </td>
          </tr>
        </tbody>
      </table>
    </form>
  </div>
</div>
